# note:
# this could be both .xinitrc or .xsession
# startx calls .xinitrc and if it doesn't exist
# then it uses system defaults in /etc/X11/Xinit
# and /etc/X11/Xsession and then starts
# ~/.xsession which results in a cleaner setup (eg, dbus)

set -eu

# todo new file or overwrite old file instead?
exec >> >(ts '%F %T' >>& .log-dwm)
exec 2>&1

# todo to check if bash or zsh, possible to make it use zsh?
ps

# monitor never off
xset -dpms
xset s off
setterm --blank 0 --powerdown 0

# todo new file or overwrite old file instead?
redshift -r -v |& ts '%F %T' >>& .log-redshift &

# todo/note currently also setting already in /etc/default/keyboard for to have it in the virtual terminal
# not really necessary here anymore, but not sure how to do the dynamic variant
setxkbmap -layout pointluck -variant $(hostname)
xmodmap ~/config/dots/keyboard/mods
xset r rate 200 50  # keyboard repeat rate (delay ms, repeats per second)
numlockx on

# todo how to get id, what if different mice or accels needed?
#xinput --set-prop 8 'libinput Accel Speed' 1 || true
#xinput --set-prop 9 'libinput Accel Speed' 1 || true

xsetroot -bg black
xsetroot -solid black
feh --no-fehbg --bg-fill ~/config/dots/dwm.d/5_stripes_landscape.jpg

while xsetroot -name " ($(pactl list sinks | awk '/Volume: front-left/ { print $5 }')) $(date '+%F %A %R') "; do sleep 5; done &

dwm
