#!/bin/zsh
set -eux -o pipefail

# for now hard-coded instead of local directory
cd ~/src

folder=$(realpath .)
name=$(basename $folder)

tmux new-session -s $name -d -c $folder

tmux set-environment src $folder
tmux set-environment nn $folder/nn
tmux set-environment PATH $folder/nn/bin:$PATH

PATH=$folder/nn/bin:$PATH tmux split-window # need to set path, before attach it doesn't seem to use the set path
tmux kill-pane -t :1.1 # todo only works in 1 based indices, not 0 based, depends on tmux.conf
tmux attach-session
