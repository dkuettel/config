#!/bin/zsh
set -eux -o pipefail

# bind an executable to g (split) and G (new window)
# meant to use dynamically for whatever is the current task

cmd='echo ">" '$@'; echo; '$@'; echo; echo ">" '$@' ; read -sq "?exit code = $?"'
tmux bind-key g split-window -h -c "#{pane_current_path}" zsh -ic $cmd
tmux bind-key G new-window -n g-bound -c "#{pane_current_path}" zsh -ic $cmd
