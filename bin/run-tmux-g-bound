#!/bin/zsh
set -eu -o pipefail

x=${1:?executable}

cd $workspace_home

while true; do

    echo ">>>" $x "<<<"
    echo

    .tmux-bind-g/$x
    ret=$?

    echo
    echo ">>>" $x "<<<"
    echo "exit code = $?"

    while true; do
        read -sk "r?[q] to quit or [enter] to rerun:"
        echo
        if [[ $r == q ]]; then
            exit $ret
        fi
        if [[ $r == $'"'"'\n'"'"' ]]; then
            break
        fi
    done

done
