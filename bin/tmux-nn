#!/bin/zsh
set -eux -o pipefail

folder=${1:-.}
folder=${folder:a}

name=$(realpath --relative-base=$HOME $folder)

path=(
    ~/config/bin/nn
    $folder/bin
    $path
)

args=(
    new-session
        -s $name
        -c $folder
        -e h=$folder
        -e PATH=$PATH
        notes
    \;
    new-window -t :2 -n src
)
tmux $args
